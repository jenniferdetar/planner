<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning - Home Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=Coming+Soon&family=Plus+Jakarta+Sans:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="shared.js"></script>
    <style>
        :root {
            --header-blue: #5a8ca0;
            --border-color: #333;
        }
        body {
            font-family: 'Coming Soon', cursive;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }
        .global-header {
            background: #fff;
            padding: 10px 20px;
            display: flex;
            gap: 20px;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .nav-link {
            text-decoration: none;
            color: #333;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .container {
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        .notebook-page {
            width: 100%; box-sizing: border-box;
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        .page-title {
            color: var(--header-blue);
            border-bottom: 2px solid var(--header-blue);
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .notes-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        textarea {
            width: 100%;
            height: 100px;
            font-family: 'Coming Soon', cursive;
            font-size: 1.1rem;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            line-height: 1.5;
            resize: vertical;
            box-sizing: border-box;
        }
        .save-btn {
            align-self: flex-end;
            padding: 8px 20px;
            background-color: var(--header-blue);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Coming Soon', cursive;
            font-size: 1rem;
        }
        .save-btn:hover {
            opacity: 0.9;
        }
        .entries-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .note-entry {
            background: #fff;
            border-left: 4px solid var(--header-blue);
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-radius: 0 4px 4px 0;
            position: relative;
        }
        .entry-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 8px;
        }
        .entry-content {
            white-space: pre-wrap;
            line-height: 1.4;
        }
        .delete-btn {
            cursor: pointer;
            color: #cc0000;
            opacity: 0.5;
        }
        .delete-btn:hover {
            opacity: 1;
        }
        .save-status {
            font-size: 0.8rem;
            color: #666;
            text-align: right;
        }
        .nav-btn {
            background: none;
            border: 1px solid var(--border-color);
            padding: 2px 12px;
            cursor: pointer;
            font-family: 'Coming Soon', cursive;
            font-size: 0.9rem;
            border-radius: 12px;
            text-decoration: none;
            color: inherit;
        }
        .mantra-section {
            display: none;
            background: #fffcf0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .mantra-para {
            margin-bottom: 15px;
            text-indent: 20px;
        }
    </style>
</head>
<body>
    <header class="global-header">
        <a href="index.html" class="nav-link">Home</a>
        <a href="monthly-review.html" class="nav-link">Monthly Review</a>
        <a href="csea.html" class="nav-link">CSEA</a>
        <a href="financial.html" class="nav-link">Financial</a>
        <a href="hoa.html" class="nav-link">HOA</a>
        <a href="icaap.html" class="nav-link">iCAAP</a>
        <a href="planning.html" class="nav-link">Planning</a>
    </header>

    <div class="container">
        <div class="notebook-page">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--header-blue); margin-bottom: 20px; padding-bottom: 10px;">
                <h1 class="page-title" style="border-bottom: none; margin-bottom: 0; padding-bottom: 0;">Planning Notes</h1>
                <button class="nav-btn" onclick="toggleMantra()">Mantra</button>
            </div>

            <div id="mantra-display" class="mantra-section">
                <p class="mantra-para">
                    I am choosing depth over noise. I no longer confuse being needed with being called, and I understand that silence is not avoidance—it is where I hear God, my intuition, and my own wisdom most clearly. I will schedule solitude the way others schedule meetings, because if my calendar has no white space, something is out of alignment. Rest is not a reward for productivity; it is a responsibility I owe to my body, my mind, and my spirit.
                </p>
                <p class="mantra-para">
                    I lead without shrinking. I have earned my seat at the table, and when necessary, I am capable of building the table myself. I will speak when I know something and step forward when I am ready, not when I am pressured. Visibility does not require apology, and leadership does not require loudness. It requires clarity, consistency, and the courage to stand steady even when it would be easier to disappear.
                </p>
                <p class="mantra-para">
                    I build what grounds me. I value practical skills that feed people, calm homes, and create stability. There is dignity in old ways done well, and in returning to work that uses my hands and steadies my nervous system. When life feels chaotic, I come back to the tangible and the orderly. Creating structure is how I restore peace.
                </p>
                <p class="mantra-para">
                    I serve with boundaries. I help people who are willing to participate in their own growth, and I release the need to rescue, overextend, or prove my worth through exhaustion. My generosity is intentional, not reactive, and my compassion does not require self-abandonment. I am allowed to care deeply without carrying everything.
                </p>
                <p class="mantra-para">
                    I protect joy as a non-negotiable. Not every moment must be productive to be valuable. Some moments exist simply to be remembered—shared meals, laughter, road trips, quiet conversations, and ordinary days that become sacred because I was fully present. Joy is not a distraction from my purpose; it is evidence that I am living it.
                </p>
                <p class="mantra-para">
                    I trust the pace of my life. I am not late, not behind, and not missing anything meant for me. I am becoming. I will not rush what is meant to mature, and I will not carry what was never mine to hold. Consistency matters more than urgency, and faith steadies me when fear tries to speak louder.
                </p>
                <p class="mantra-para">
                    I am building a life where work is meaningful but not consuming, leadership is steady rather than frantic, service is impactful without being depleting, and home is calm instead of chaotic. My faith remains central, my values guide my choices, and my peace is protected on purpose. I move forward with intention, rooted rather than rushed, trusting that this way of living is not only sustainable—it is right.
                </p>
            </div>

            <div class="notes-section">
                <div class="input-group">
                    <textarea id="new-note-content" placeholder="Type a new note here..."></textarea>
                    <button class="save-btn" onclick="handleAddNote()">Save Note</button>
                    <div id="save-status" class="save-status"></div>
                </div>
                <div id="entries-list" class="entries-list">
                    <!-- Entries will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const CATEGORY = 'Planning';
        const entriesList = document.getElementById('entries-list');
        const newNoteContent = document.getElementById('new-note-content');
        const saveStatus = document.getElementById('save-status');

        function createEntryElement(entry) {
            const div = document.createElement('div');
            div.className = 'note-entry';
            div.id = `entry-${entry.id}`;
            div.innerHTML = `
                <div class="entry-header">
                    <span>${formatDate(entry.created_at)}</span>
                    <span class="delete-btn" onclick="handleDeleteNote(${entry.id})">Delete</span>
                </div>
                <div class="entry-content">${entry.content}</div>
            `;
            return div;
        }

        async function loadEntries() {
            const entries = await fetchCategoryEntries(CATEGORY);
            entriesList.innerHTML = '';
            entries.forEach(entry => {
                entriesList.appendChild(createEntryElement(entry));
            });
        }

        async function handleAddNote() {
            const content = newNoteContent.value;
            if (!content.trim()) return;

            saveStatus.innerText = 'Saving...';
            const newEntry = await saveCategoryEntry(CATEGORY, content);
            
            if (newEntry) {
                newNoteContent.value = '';
                saveStatus.innerText = 'Saved';
                entriesList.prepend(createEntryElement(newEntry));
                setTimeout(() => { saveStatus.innerText = ''; }, 2000);
            } else {
                saveStatus.innerText = 'Error saving';
            }
        }

        async function handleDeleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                const success = await deleteCategoryEntry(id);
                if (success) {
                    document.getElementById(`entry-${id}`).remove();
                }
            }
        }

        function toggleMantra() {
            const display = document.getElementById('mantra-display');
            if (display.style.display === 'block') {
                display.style.display = 'none';
            } else {
                display.style.display = 'block';
            }
        }

        // Initialize
        loadEntries();
    </script>
</body>
</html>
