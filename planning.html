<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning - Home Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=Coming+Soon&family=Plus+Jakarta+Sans:wght@400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="shared.js"></script>
    <style>
        :root {
            --header-blue: #00326b;
            --border-color: #333;
            --tan-bg: #fffcf0;
            --text-color: #333;
        }
        body {
            font-family: 'Coming Soon', cursive;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: var(--text-color);
        }
        .global-header {
            background: #00326b;
            padding: 5px 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 1000;
            align-items: center;
        }
        .nav-link {
            text-decoration: none;
            color: #ffca38;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 15px;
            border: 2px solid #ffca38;
            border-radius: 20px;
            transition: all 0.2s ease;
        }
        .nav-link:hover {
            background-color: #ffca38;
            color: #00326b;
        }
        .container {
            display: flex;
            justify-content: center;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
            margin: 0 auto;
        }
        .planner-spread {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            margin: 0 auto;
        }
        .notebook-page {
            width: 100%;
            max-width: 1200px;
            box-sizing: border-box;
            background: #fff;
            padding: 40px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            min-height: calc(100vh - 100px);
            margin: 0 auto 15px auto;
        }
        .section-header {
            text-align: left;
            border-bottom: 2px solid var(--header-blue);
            margin-bottom: 20px;
            padding-bottom: 5px;
            color: var(--header-blue);
            font-size: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .page-header {
            text-align: center;
            margin-bottom: 25px;
        }
        .page-title {
            font-size: 2rem;
            color: var(--header-blue);
            margin: 0 0 10px 0;
            letter-spacing: 3px;
            text-transform: uppercase;
        }
        .intro-text {
            font-size: 0.8rem;
            color: #666;
            width: 100%;
            margin: 0 auto;
            line-height: 1.4;
            text-align: center;
        }
        .top-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .section-box {
            background-color: var(--tan-bg);
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 4px;
        }
        .section-prompt {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        .section-prompt span {
            font-weight: normal;
        }
        .ruled-line {
            border-bottom: 1px solid #ddd;
            margin-bottom: 8px;
            min-height: 24px;
            width: 100%;
            display: flex;
            align-items: center;
        }
        .editable-area {
            outline: none;
            width: 100%;
            font-size: 0.95rem;
        }
        .checkbox-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            cursor: pointer;
        }
        .checkbox {
            width: 12px;
            height: 12px;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            background: #fff;
        }
        .checkbox.checked::after {
            content: "â– ";
            font-size: 10px;
        }
        .full-width-prompt {
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .prompt-text {
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        .dream-big-title {
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 2px solid #333;
            display: inline-block;
        }
        .dream-big-title span {
            font-weight: normal;
            font-size: 0.75rem;
        }
        .dream-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            border: 1px solid #ddd;
        }
        .dream-box {
            padding: 15px;
            border: 1px solid #ddd;
            min-height: 100px;
        }
        .dream-label {
            font-size: 0.7rem;
            color: #888;
            margin-bottom: 10px;
        }
        .footer-prompts {
            margin-top: 25px;
        }
        .footer-prompt-item {
            display: flex;
            align-items: baseline;
            gap: 10px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }
        .footer-prompt-item .ruled-line {
            flex-grow: 1;
        }
        .save-status {
            font-size: 0.7rem;
            color: #888;
            height: 15px;
            text-align: center;
            margin-top: 5px;
        }
        .left-col, .right-col {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
    </style>
</head>
<body>
    <header class="global-header">
        <a href="index.html" class="nav-link">Home</a>
        <a href="notebook.html" class="nav-link">Notebook</a>
        <a href="financial.html" class="nav-link">Financial</a>
        <a href="personal-goals.html" class="nav-link">Goals</a>
        <a href="planning.html" class="nav-link">Planning</a>
        <a href="mantra.html" class="nav-link">Mantra</a>
    </header>
    <div id="save-status" class="save-status">All changes saved</div>
    <div class="container">
        <div class="planner-spread">
            <div class="notebook-page">
                <div class="page-header">
                    <h1 class="page-title">Intentions & Dreams</h1>
                    <div style="margin-bottom: 20px; display: flex; justify-content: center; gap: 15px;">
                        <a href="personal-goals.html" class="nav-btn" style="text-decoration: none; display: inline-block;">Personal Goals</a>
                        <a href="monthly-review.html" class="nav-btn" style="text-decoration: none; display: inline-block;">Monthly Review</a>
                    </div>
                    <p class="intro-text">
                        What do you want to prioritize in your daily work when planning for the upcoming year?<br>
                        On the following pages, focus on your mission, vision, values, and purpose.
                    </p>
                </div>
                <div class="section-header">Be Thoughtful</div>
                <div class="top-grid">
                    <div class="section-box">
                        <div class="section-prompt">
                            When looking forward <span>to the coming year, what would you love for your work to look like each day? What fills you up in the time you spend at work? Take a few moments to consider what you love most as you begin today.</span>
                        </div>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="look-forward-1"></div></div>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="look-forward-2"></div></div>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="look-forward-3"></div></div>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="look-forward-4"></div></div>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="look-forward-5"></div></div>
                    </div>
                    <div class="section-box">
                        <div class="section-prompt">
                            Do you love <span>it when you have the time to be ...</span>
                        </div>
                        <div class="checkbox-grid">
                            <div class="checkbox-item" data-value="Creative" data-prefix="love-cb-"><div class="checkbox"></div> Creative</div>
                            <div class="checkbox-item" data-value="Energetic" data-prefix="love-cb-"><div class="checkbox"></div> Energetic</div>
                            <div class="checkbox-item" data-value="Fun" data-prefix="love-cb-"><div class="checkbox"></div> Fun</div>
                            <div class="checkbox-item" data-value="Quiet" data-prefix="love-cb-"><div class="checkbox"></div> Quiet</div>
                            <div class="checkbox-item" data-value="Generous" data-prefix="love-cb-"><div class="checkbox"></div> Generous</div>
                            <div class="checkbox-item" data-value="Loud" data-prefix="love-cb-"><div class="checkbox"></div> Loud</div>
                            <div class="checkbox-item" data-value="Encouraging" data-prefix="love-cb-"><div class="checkbox"></div> Encouraging</div>
                            <div class="checkbox-item" data-value="Involved" data-prefix="love-cb-"><div class="checkbox"></div> Involved</div>
                            <div class="checkbox-item" data-value="Reliable" data-prefix="love-cb-"><div class="checkbox"></div> Reliable</div>
                            <div class="checkbox-item" data-value="Genuine" data-prefix="love-cb-"><div class="checkbox"></div> Genuine</div>
                            <div class="checkbox-item" data-value="Independent" data-prefix="love-cb-"><div class="checkbox"></div> Independent</div>
                            <div class="checkbox-item" data-value="Curious" data-prefix="love-cb-"><div class="checkbox"></div> Curious</div>
                            <div class="checkbox-item" data-value="Excited" data-prefix="love-cb-"><div class="checkbox"></div> Excited</div>
                            <div class="checkbox-item" data-value="Valuable" data-prefix="love-cb-"><div class="checkbox"></div> Valuable</div>
                            <div class="checkbox-item" data-value="A leader" data-prefix="love-cb-"><div class="checkbox"></div> A leader</div>
                            <div class="checkbox-item" data-value="Custom1" data-prefix="love-cb-" style="border-bottom: 1px solid #ddd;"><div class="checkbox"></div> <div class="editable-area" contenteditable="true" data-field="love-custom1" style="width: 80px;" onclick="event.stopPropagation()"></div></div>
                            <div class="checkbox-item" data-value="Servant-hearted" data-prefix="love-cb-"><div class="checkbox"></div> Servant-hearted</div>
                            <div class="checkbox-item" data-value="Custom2" data-prefix="love-cb-" style="border-bottom: 1px solid #ddd;"><div class="checkbox"></div> <div class="editable-area" contenteditable="true" data-field="love-custom2" style="width: 80px;" onclick="event.stopPropagation()"></div></div>
                        </div>
                    </div>
                </div>
                <div class="full-width-prompt">
                    <div class="prompt-text">What is your absolute favorite thing you love doing at work each day?</div>
                    <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="favorite-thing"></div></div>
                </div>
                <div class="full-width-prompt">
                    <div class="prompt-text">What didn't you enjoy in your work over the last year?</div>
                    <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="not-enjoyed"></div></div>
                </div>
                <div class="full-width-prompt">
                    <div class="prompt-text">What was simply fun for you as you look back over the last year, personally or professionally?</div>
                    <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="fun-last-year"></div></div>
                </div>
                <div class="dream-big-title">
                    Dream big | <span>Where would you like to be financially, physically, emotionally, and spiritually in a year? Do you want to run a half marathon? Pay off your home? Or hit a certain income goal? Write it down so you can keep track of it, and dream big in the next 12 months!</span>
                </div>
                <div class="dream-grid">
                    <div class="dream-box">
                        <div class="dream-label">Financially</div>
                        <div class="editable-area" contenteditable="true" data-field="dream-financial" style="min-height: 80px;"></div>
                    </div>
                    <div class="dream-box">
                        <div class="dream-label">Physically</div>
                        <div class="editable-area" contenteditable="true" data-field="dream-physical" style="min-height: 80px;"></div>
                    </div>
                    <div class="dream-box">
                        <div class="dream-label">Emotionally</div>
                        <div class="editable-area" contenteditable="true" data-field="dream-emotional" style="min-height: 80px;"></div>
                    </div>
                    <div class="dream-box">
                        <div class="dream-label">Spiritually</div>
                        <div class="editable-area" contenteditable="true" data-field="dream-spiritual" style="min-height: 80px;"></div>
                    </div>
                </div>
                <div class="footer-prompts">
                    <div class="footer-prompt-item">
                        <span>This year, more than anything else, I want to focus on</span>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="focus-this-year"></div></div>
                    </div>
                    <div class="footer-prompt-item">
                        <span>To make that happen, I'm going to spend my time and energy on</span>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="spend-time-on"></div></div>
                    </div>
                    <div class="footer-prompt-item">
                        <span>Instead of spending too much time on</span>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="less-time-on" style="width: 150px;"></div></div>
                        <span>, I'm going to dream big about</span>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="dream-big-about"></div></div>
                    </div>
                    <div class="footer-prompt-item">
                        <span>This is so worth it because</span>
                        <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="worth-it-because" style="width: 200px;"></div></div>
                        <span>are depending on me!</span>
                    </div>
                </div>
                <div class="section-header" style="margin-top: 30px;">Take a Moment</div>
                <p class="intro-text" style="margin-bottom: 20px;">
                    As you begin a new year, take a moment to reflect on what you enjoy most and dream big!
                </p>
                <div class="top-grid">
                    <div class="left-col">
                        <div class="section-box" style="margin-bottom: 20px;">
                            <div class="section-prompt">
                                Mission | <span>When thinking of your work, what do you consider to be your mission?</span>
                            </div>
                            <div class="footer-prompt-item">
                                <span>My mission in my work is</span>
                                <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="mission-work"></div></div>
                            </div>
                            <div class="footer-prompt-item">
                                <span>My goal is to</span>
                                <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="goal-each-day"></div></div>
                                <span>each day,</span>
                            </div>
                            <div class="footer-prompt-item">
                                <span>and I strive to</span>
                                <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="strive-to"></div></div>
                            </div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="mission-ruled-1"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="mission-ruled-2"></div></div>
                        </div>
                        <div class="section-box">
                            <div class="section-prompt">
                                Vision | <span>So what on earth is the difference between your MISSION and your VISION? Your mission looks closely at what you're doing today and who you're serving, while your vision is where you'd love to go one day.</span>
                            </div>
                            <div class="prompt-text">Think BIG. Dream WILDLY.</div>
                            <div class="prompt-text" style="font-size: 0.75rem; margin-top: 10px;">Where would you love to be in one year? Who do you serve today, and how would you love to serve them in a year, or even in five years? Take a few minutes, cast your vision looking into the future ~ and simply dream of where you'd love to be.</div>
                            <div class="prompt-text" style="margin-top: 15px;">Looking forward to the year ahead, I'd love to ...</div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-1yr-1"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-1yr-2"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-1yr-3"></div></div>
                            <div class="prompt-text" style="margin-top: 15px;">In the next five years, I hope to ...</div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-5yr-1"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-5yr-2"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="vision-5yr-3"></div></div>
                        </div>
                    </div>
                    <div class="right-col">
                        <div class="section-box" style="margin-bottom: 20px;">
                            <div class="section-prompt">
                                Value | <span>What (or who?) do you value? What lights you up when you wake up each day? Here are a few examples to get you started if you're stumped ...</span>
                            </div>
                            <div class="prompt-text">I value ...</div>
                            <div class="checkbox-grid">
                                <div class="checkbox-item" data-value="Community" data-prefix="value-cb-"><div class="checkbox"></div> Community</div>
                                <div class="checkbox-item" data-value="Gratitude" data-prefix="value-cb-"><div class="checkbox"></div> Gratitude</div>
                                <div class="checkbox-item" data-value="My family" data-prefix="value-cb-"><div class="checkbox"></div> My family</div>
                                <div class="checkbox-item" data-value="Humility" data-prefix="value-cb-"><div class="checkbox"></div> Humility</div>
                                <div class="checkbox-item" data-value="Integrity" data-prefix="value-cb-"><div class="checkbox"></div> Integrity</div>
                                <div class="checkbox-item" data-value="Innovation" data-prefix="value-cb-"><div class="checkbox"></div> Innovation</div>
                                <div class="checkbox-item" data-value="Determination" data-prefix="value-cb-"><div class="checkbox"></div> Determination</div>
                                <div class="checkbox-item" data-value="Organization" data-prefix="value-cb-"><div class="checkbox"></div> Organization</div>
                                <div class="checkbox-item" data-value="Grit" data-prefix="value-cb-"><div class="checkbox"></div> Grit</div>
                                <div class="checkbox-item" data-value="Resourcefulness" data-prefix="value-cb-"><div class="checkbox"></div> Resourcefulness</div>
                                <div class="checkbox-item" data-value="My health" data-prefix="value-cb-"><div class="checkbox"></div> My health</div>
                                <div class="checkbox-item" data-value="Frugality" data-prefix="value-cb-"><div class="checkbox"></div> Frugality</div>
                                <div class="checkbox-item" data-value="Confidence" data-prefix="value-cb-"><div class="checkbox"></div> Confidence</div>
                                <div class="checkbox-item" data-value="CustomValue1" data-prefix="value-cb-" style="border-bottom: 1px solid #ddd;"><div class="checkbox"></div> <div class="editable-area" contenteditable="true" data-field="value-custom1" style="width: 80px;" onclick="event.stopPropagation()"></div></div>
                                <div class="checkbox-item" data-value="My faith" data-prefix="value-cb-"><div class="checkbox"></div> My faith</div>
                                <div class="checkbox-item" data-value="CustomValue2" data-prefix="value-cb-" style="border-bottom: 1px solid #ddd;"><div class="checkbox"></div> <div class="editable-area" contenteditable="true" data-field="value-custom2" style="width: 80px;" onclick="event.stopPropagation()"></div></div>
                            </div>
                        </div>
                        <div class="section-box">
                            <div class="section-prompt">
                                Purpose | <span>When you were created, you were uniquely gifted in a way that simply no one else was. You were perfectly designed to fulfill a purpose that only you can.</span>
                            </div>
                            <div class="prompt-text" style="font-size: 0.75rem;">What is your purpose? What are you gifted in that serves those around you each day? Looking forward, envision what the lives of those around you might look like when you fully step into exactly who you were made to be.</div>
                            <div class="ruled-line" style="margin-top: 15px;"><div class="editable-area" contenteditable="true" data-field="purpose-1"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="purpose-2"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="purpose-3"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="purpose-4"></div></div>
                            <div class="ruled-line"><div class="editable-area" contenteditable="true" data-field="purpose-5"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        let saveTimeout;
        const urlParams = new URLSearchParams(window.location.search);
        const dateParam = urlParams.get('date');
        const planningYear = dateParam ? new Date(dateParam).getFullYear() : new Date().getFullYear();
        const PLANNING_DATE = `${planningYear}-planning`;
        async function init() {
            // Load data from Supabase
            const data = await fetchPlannerData(PLANNING_DATE);
            if (data && data.length > 0) {
                data.forEach(item => {
                    if (item.field_id.startsWith('love-cb-') || item.field_id.startsWith('value-cb-')) {
                        const prefix = item.field_id.startsWith('love-cb-') ? 'love-cb-' : 'value-cb-';
                        const valueName = item.field_id.replace(prefix, '');
                        const el = document.querySelector(`.checkbox-item[data-value="${valueName}"][data-prefix="${prefix}"] .checkbox`);
                        if (el) {
                            if (item.content === 'true') el.classList.add('checked');
                        }
                    } else {
                        const el = document.querySelector(`[data-field="${item.field_id}"]`);
                        if (el) {
                            if (el.tagName === 'DIV') el.innerText = item.content;
                            else el.value = item.content;
                        }
                    }
                });
            }
            // Set up event listeners for text areas
            document.querySelectorAll('.editable-area').forEach(el => {
                el.addEventListener('input', (e) => {
                    const fieldId = el.getAttribute('data-field');
                    const content = el.innerText;
                    handleSave(fieldId, content);
                });
            });
            // Set up event listeners for checkboxes
            document.querySelectorAll('.checkbox-item').forEach(item => {
                item.addEventListener('click', () => {
                    const cb = item.querySelector('.checkbox');
                    cb.classList.toggle('checked');
                    const isChecked = cb.classList.contains('checked');
                    const valueName = item.getAttribute('data-value');
                    const prefix = item.getAttribute('data-prefix');
                    handleSave(`${prefix}${valueName}`, isChecked.toString());
                });
            });
        }
        function handleSave(fieldId, content) {
            const status = document.getElementById('save-status');
            status.innerText = 'Unsaved changes';
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(async () => {
                status.innerText = 'Saving...';
                const success = await savePlannerData(PLANNING_DATE, fieldId, content);
                status.innerText = success ? 'All changes saved' : 'Error saving';
            }, 1000);
        }
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
