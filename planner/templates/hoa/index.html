{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HOA</title>
  <link rel="stylesheet" href="{% static 'css/opus-core.css' %}?v=20260108">
  <link rel="stylesheet" href="{% static 'css/home.css' %}?v=20260108">
  <link rel="stylesheet" href="{% static 'css/calendar.css' %}?v=20260108">
  <style>
    .hoa-tab-content.hidden {
      display: none;
    }

    .hoa-grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .hoa-card {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #99B3C5;
      border-radius: 999px;
      padding: 12px 16px;
      border: 2px solid rgba(10, 47, 95, 0.15);
      box-shadow: var(--opus-shadow-sm);
    }

    .hoa-card:nth-child(4n+1) { background: #99B3C5; }
    .hoa-card:nth-child(4n+2) { background: #FFA1AB; }
    .hoa-card:nth-child(4n+3) { background: #FFC68D; }
    .hoa-card:nth-child(4n+4) { background: #9ADBDE; }

    .hoa-card-icon {
      display: grid;
      place-items: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 1.1rem;
      color: #0a2f5f;
      border: 2px solid rgba(10, 47, 95, 0.2);
      background: #ffffff;
      flex-shrink: 0;
      box-shadow: var(--opus-shadow-xs);
    }

    .hoa-card:nth-child(4n+1) .hoa-card-icon { background: #99B3C5; }
    .hoa-card:nth-child(4n+2) .hoa-card-icon { background: #FFA1AB; }
    .hoa-card:nth-child(4n+3) .hoa-card-icon { background: #FFC68D; }
    .hoa-card:nth-child(4n+4) .hoa-card-icon { background: #9ADBDE; }

    .hoa-card-title {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.12;
      color: var(--opus-primary);
    }

    .hoa-card-note {
      margin: 4px 0 0;
      font-size: 0.78rem;
      line-height: 1.2;
      color: var(--opus-text-secondary);
    }

    .hoa-units-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 10px 12px;
      margin-top: 16px;
    }

    .hoa-unit-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(10, 47, 95, 0.2);
      font-size: 0.8rem;
      color: #0a2f5f;
      line-height: 1;
      white-space: nowrap;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .hoa-unit-badge:hover {
      background: #fff;
      border-color: var(--opus-primary);
      transform: translateY(-1px);
    }

    .hoa-upload {
      display: grid;
      gap: 12px;
    }

    .hoa-upload input[type="file"] {
      padding: 10px;
      border: 2px dashed #7f9db3;
      border-radius: 12px;
      background: #f8fafc;
      cursor: pointer;
    }

    .hoa-summary {
      background: #ffffff;
      border: 2px solid #dbeafe;
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--opus-shadow-sm);
      font-size: 0.95rem;
      color: #0f172a;
      min-height: 80px;
      white-space: pre-wrap;
    }

    .hoa-summary-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.88rem;
      color: #475569;
    }

    .hoa-summary-pill {
      padding: 6px 10px;
      border-radius: 999px;
      background: #e6eef5;
      border: 1px solid #7f9db3;
      color: #0a2f5f;
      font-weight: 700;
      font-size: 0.85rem;
    }
  </style>
</head>
<body data-module="hoaPage">
  <div class="planner-container">
    {% include 'header_include.html' %}

    <div class="planner-content">
      <header class="planner-header">
        <div class="planner-header-left">
          <h1>HOA</h1>
          <p>Track HOA reminders, documents, and community updates.</p>
        </div>
        <div class="planner-header-right">
          <div class="planner-header-actions">
            <button class="planner-header-pill pill-hoa active" data-tab="overview">Overview</button>
            <button class="planner-header-pill pill-hoa" data-tab="financials">Financials</button>
            <button class="planner-header-pill pill-hoa" data-tab="maintenance">Maintenance</button>
            <button class="planner-header-pill pill-hoa" data-tab="units">Units Directory</button>
          </div>
          <div class="planner-header-date" id="today-date"></div>
        </div>
      </header>
      

      <main class="planner-main">
        <!-- Overview Tab -->
        <div id="overview" class="hoa-tab-content">
          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üìÑ</span>
              <h2 class="planner-section-title">Upload & Summarize PDF</h2>
            </div>
            <div class="planner-section-content">
              <div class="hoa-upload">
                <input type="file" id="hoa-pdf-input" accept="application/pdf">
                <div class="hoa-summary-meta" id="hoa-summary-meta" aria-live="polite"></div>
                <div class="hoa-summary" id="hoa-summary-output">Select a PDF to generate a quick summary.</div>
              </div>
            </div>
          </section>

          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üè°</span>
              <h2 class="planner-section-title">HOA Library</h2>
            </div>
            <div class="planner-section-content">
              <p class="planner-card-content">Quick access to your most-used HOA folders and records.</p>
              <div class="planner-grid hoa-grid">
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">üì£</div>
                  <div>
                    <h3 class="hoa-card-title">Announcements</h3>
                    <p class="hoa-card-note">Community updates and notices.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">üë•</div>
                  <div>
                    <h3 class="hoa-card-title">BOD</h3>
                    <p class="hoa-card-note">Board of Directors contacts.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card link-unstyled" data-tab-link="financials">
                  <div class="hoa-card-icon">üíµ</div>
                  <div>
                    <h3 class="hoa-card-title">Financials</h3>
                    <p class="hoa-card-note">Budgets, expenses, and dues.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">üìÇ</div>
                  <div>
                    <h3 class="hoa-card-title">Homeowner Documents</h3>
                    <p class="hoa-card-note">Policies, bylaws, and forms.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">üõ°Ô∏è</div>
                  <div>
                    <h3 class="hoa-card-title">Insurance</h3>
                    <p class="hoa-card-note">Coverage and claim details.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">‚öñÔ∏è</div>
                  <div>
                    <h3 class="hoa-card-title">Legal</h3>
                    <p class="hoa-card-note">Compliance and legal records.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card link-unstyled" data-tab-link="maintenance">
                  <div class="hoa-card-icon">üõ†Ô∏è</div>
                  <div>
                    <h3 class="hoa-card-title">Maintenance &amp; Repairs</h3>
                    <p class="hoa-card-note">Work orders and vendor history.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card">
                  <div class="hoa-card-icon">üßæ</div>
                  <div>
                    <h3 class="hoa-card-title">Statements</h3>
                    <p class="hoa-card-note">Monthly statements and summaries.</p>
                  </div>
                </div>
                <div class="planner-card hoa-card link-unstyled" data-tab-link="units">
                  <div class="hoa-card-icon">üèòÔ∏è</div>
                  <div>
                    <h3 class="hoa-card-title">Units</h3>
                    <p class="hoa-card-note">Unit roster and owner info.</p>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Financials Tab -->
        <div id="financials" class="hoa-tab-content hidden">
          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üíµ</span>
              <h2 class="planner-section-title">Financials</h2>
            </div>
            <div class="planner-section-content">
              <div class="planner-grid financials-grid">
                <div class="planner-card" id="hoa-financials-bills-card" style="background: #99B3C5; border-radius: 20px; padding: 20px; cursor: pointer;">
                  <h3 class="planner-card-title">üí≥ Bills</h3>
                  <p class="planner-card-content">Upload and summarize bills.</p>
                </div>
                <div class="planner-card" style="background: #FFA1AB; border-radius: 20px; padding: 20px;">
                  <h3 class="planner-card-title">üìä Budget</h3>
                  <p class="planner-card-content">HOA budget records.</p>
                </div>
                <div class="planner-card" style="background: #FFC68D; border-radius: 20px; padding: 20px;">
                  <h3 class="planner-card-title">üíµ Cash</h3>
                  <p class="planner-card-content">Cash flow and balances.</p>
                </div>
                <div class="planner-card" style="background: #9ADBDE; border-radius: 20px; padding: 20px;">
                  <h3 class="planner-card-title">üõ°Ô∏è Security</h3>
                  <p class="planner-card-content">Command International Security.</p>
                </div>
                <div class="planner-card" style="background: #99B3C5; border-radius: 20px; padding: 20px;">
                  <h3 class="planner-card-title">‚ö° Utilities</h3>
                  <p class="planner-card-content">Utility records.</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Bills Section (Initially Hidden) -->
          <section id="hoa-bills-section" class="planner-section" style="display: none; border-top: 2px solid #7f9db3; padding-top: 20px;">
            <div class="planner-section-header">
              <span class="planner-section-icon">üì§</span>
              <h2 class="planner-section-title">Upload & Summarize Bill</h2>
            </div>
            <div class="planner-section-content">
              <p class="planner-card-content">Upload a bill or invoice to get an automatic summary.</p>
              <div class="opus-row-center-gap-md" style="margin-top: 12px; display: flex; align-items: center; gap: 12px;">
                <input type="file" id="bill-upload" style="display: none;" accept=".pdf,.txt,.doc,.docx" />
                <button id="upload-btn" class="planner-button planner-button-primary">Upload Document</button>
                <span id="upload-status" class="opus-text-secondary opus-text-sm"></span>
              </div>
              <div id="summarization-progress" style="margin-top: 16px; display: none;">
                <div style="height: 4px; width: 100%; background: #eee; border-radius: 2px; overflow: hidden;">
                  <div id="progress-bar" style="height: 100%; width: 0%; background: var(--opus-primary); transition: width 0.3s;"></div>
                </div>
                <p class="opus-text-secondary opus-text-sm" style="margin-top: 4px;">Analyzing document...</p>
              </div>
            </div>
          </section>

          <section id="auto-summary-section" class="planner-section" style="display: none;">
            <div class="planner-section-header">
              <span class="planner-section-icon">ü§ñ</span>
              <h2 class="planner-section-title">AI Summary</h2>
            </div>
            <div class="planner-section-content">
              <div id="auto-summary-content">
                <!-- Summary will be injected here -->
              </div>
            </div>
          </section>
        </div>

        <!-- Maintenance Tab -->
        <div id="maintenance" class="hoa-tab-content hidden">
          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üõ†Ô∏è</span>
              <h2 class="planner-section-title">Active Work Orders</h2>
            </div>
            <div class="planner-section-content">
              <div class="planner-grid">
                <div class="planner-card">
                  <h3 class="planner-card-title">Gutter Cleaning</h3>
                  <p class="planner-card-content">Scheduled for next Tuesday. Vendor: Precision Gutters.</p>
                </div>
                <div class="planner-card">
                  <h3 class="planner-card-title">Pool Pump Repair</h3>
                  <p class="planner-card-content">Awaiting parts. Quote approved on Jan 2nd.</p>
                </div>
              </div>
            </div>
          </section>

          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üìú</span>
              <h2 class="planner-section-title">Vendor History</h2>
            </div>
            <div class="planner-section-content">
              <p class="planner-card-content">Track past maintenance jobs and vendor performance.</p>
              <div style="margin-top: 16px;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                  <thead>
                    <tr style="text-align: left; border-bottom: 1px solid #eee;">
                      <th style="padding: 8px;">Date</th>
                      <th style="padding: 8px;">Unit</th>
                      <th style="padding: 8px;">Vendor</th>
                      <th style="padding: 8px;">Service</th>
                      <th style="padding: 8px;">Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom: 1px solid #f9f9f9;">
                      <td style="padding: 8px;">Dec 15, 2025</td>
                      <td style="padding: 8px;">112</td>
                      <td style="padding: 8px;">Green Scapes</td>
                      <td style="padding: 8px;">Landscaping</td>
                      <td style="padding: 8px;"><span style="color: green;">Completed</span></td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f9f9f9;">
                      <td style="padding: 8px;">Nov 20, 2025</td>
                      <td style="padding: 8px;">045</td>
                      <td style="padding: 8px;">Safe-T Security</td>
                      <td style="padding: 8px;">Gate Sensor Fix</td>
                      <td style="padding: 8px;"><span style="color: green;">Completed</span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </section>
        </div>

        <!-- Units Tab -->
        <div id="units" class="hoa-tab-content hidden">
          <section class="planner-section">
            <div class="planner-section-header">
              <span class="planner-section-icon">üèòÔ∏è</span>
              <h2 class="planner-section-title">Unit Directory</h2>
            </div>
            <div class="planner-section-content">
              <p class="planner-card-content">Quick access to unit information.</p>
              <div class="hoa-units-list">
                  <span class="hoa-unit-badge">Unit 001</span>
                  <span class="hoa-unit-badge">Unit 002</span>
                  <span class="hoa-unit-badge">Unit 003</span>
                  <span class="hoa-unit-badge">Unit 004</span>
                  <span class="hoa-unit-badge">Unit 005</span>
                  <span class="hoa-unit-badge">Unit 006</span>
                  <span class="hoa-unit-badge">Unit 007</span>
                  <span class="hoa-unit-badge">Unit 008</span>
                  <span class="hoa-unit-badge">Unit 009</span>
                  <span class="hoa-unit-badge">Unit 010</span>
                  <!-- ... more units can be added here ... -->
                  <span class="hoa-unit-badge">Unit 011</span>
                  <span class="hoa-unit-badge">Unit 012</span>
                  <span class="hoa-unit-badge">Unit 013</span>
                  <span class="hoa-unit-badge">Unit 014</span>
                  <span class="hoa-unit-badge">Unit 015</span>
                  <span class="hoa-unit-badge">Unit 016</span>
                  <span class="hoa-unit-badge">Unit 017</span>
                  <span class="hoa-unit-badge">Unit 018</span>
                  <span class="hoa-unit-badge">Unit 019</span>
                  <span class="hoa-unit-badge">Unit 020</span>
              </div>
            </div>
          </section>
        </div>
      </main>

      <footer class="planner-footer">
        HOA Synced securely via Supabase (login required).
      </footer>
    </div>
  </div>

  <script src="{% static 'js/hoa-hub.js' %}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    if (window.pdfjsLib) {
      window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>
<script src="{% static 'js/calendar-embed.js' %}?v=20260108"></script>
</body>
</html>
