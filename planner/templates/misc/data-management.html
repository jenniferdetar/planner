{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Management - Opus One Planner</title>
  <link rel="stylesheet" href="{% static 'css/core/opus-core.css' %}?v=20260108">
  <link rel="stylesheet" href="{% static 'css/core/home.css' %}?v=20260108">
  <link rel="stylesheet" href="{% static 'css/calendar/calendar.css' %}?v=20260108">
    <link rel="stylesheet" href="{% static 'css/misc/data-management.css' %}?v=20260108">
</head>
<body data-module="dataManagementPage">
  <div class="planner-container">
    {% include 'header_include.html' %}

    <div class="planner-content">
      <header class="planner-header">
        <div class="planner-header-left">
          <h1>Data Management</h1>
          <p>Backup, restore, and manage your data</p>
        </div>
                        <div class="planner-header-right">
          <div class="planner-header-actions">
            <a href="/personal-planner/" class="planner-header-pill">Personal Planner</a>
            <a href="/work-planner/" class="planner-header-pill">Work Planner</a>
          </div>
          <div class="planner-header-date" id="today-date"></div>
        </div>
      </header>
      

      <main class="planner-main"><section class="planner-section">
          <div class="planner-section-header">
            <span class="planner-section-icon">üì•</span>
            <h2 class="planner-section-title">Export Data</h2>
          </div>
          <div class="planner-section-content">
            <p class="opus-text-secondary opus-mb-md">Download a complete backup of all your data as a JSON file.</p>
            <button id="export-btn" class="planner-button planner-button-primary">Export as JSON</button>
          </div>
        </section>

        <section class="planner-section">
          <div class="planner-section-header">
            <span class="planner-section-icon">üì§</span>
            <h2 class="planner-section-title">Import Data</h2>
          </div>
          <div class="planner-section-content">
            <p class="opus-text-secondary opus-mb-md">Restore data from a previously exported JSON file.</p>
            <input type="file" id="import-file" accept=".json" class="opus-hidden" />
            <div class="opus-row-center-gap-md">
              <button id="import-btn" type="button" class="planner-button planner-button-primary">Choose File</button>
              <span id="file-name" class="opus-text-secondary opus-text-sm"></span>
            </div>
          </div>
        </section>

        <section class="planner-section">
          <div class="planner-section-header">
            <span class="planner-section-icon">üìã</span>
            <h2 class="planner-section-title">Bulk Import Tasks</h2>
          </div>
          <div class="planner-section-content">
            <p class="opus-text-secondary opus-mb-md">Add tasks from an external JSON file. Format: [{&quot;text&quot;: &quot;...&quot;, &quot;due&quot;: &quot;YYYY-MM-DD&quot;, &quot;completed&quot;: false}]</p>
            <input type="file" id="bulk-import-file" accept=".json" class="opus-hidden" />
            <div class="opus-row-center-gap-md">
              <button id="bulk-import-btn" type="button" class="planner-button planner-button-primary">Choose File</button>
              <span id="bulk-file-name" class="opus-text-secondary opus-text-sm"></span>
            </div>
          </div>
        </section>

        <section class="planner-section" style="border-color: var(--opus-danger); background: rgba(198, 40, 40, 0.05);">
          <div class="planner-section-header">
            <span class="planner-section-icon">‚ö†Ô∏è</span>
            <h2 class="planner-section-title" style="color: var(--opus-danger);">Danger Zone</h2>
          </div>
          <div class="planner-section-content">
            <p class="opus-text-secondary opus-mb-md">Permanently delete all your data. This action cannot be undone.</p>
            <button id="clear-btn" class="planner-button planner-button-danger">Clear All Data</button>
          </div>
        </section>

        <section class="planner-section">
          <div class="planner-section-header">
            <span class="planner-section-icon">üìä</span>
            <h2 class="planner-section-title">Data Statistics</h2>
          </div>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Tasks</div>
              <div id="task-count" style="font-size: 1.8rem; font-weight: 600; color: var(--opus-primary);">0</div>
            </div>
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Goals</div>
              <div id="goal-count" style="font-size: 1.8rem; font-weight: 600; color: var(--opus-primary);">0</div>
            </div>
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Notes</div>
              <div id="note-count" style="font-size: 1.8rem; font-weight: 600; color: var(--opus-primary);">0</div>
            </div>
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Meetings</div>
              <div id="meeting-count" style="font-size: 1.8rem; font-weight: 600; color: var(--opus-primary);">0</div>
            </div>
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Master Tasks</div>
              <div id="master-task-count" style="font-size: 1.8rem; font-weight: 600; color: var(--opus-primary);">0</div>
            </div>
            <div style="background: var(--opus-bg-light); padding: 16px; border-radius: 4px;">
              <div style="font-size: 0.9rem; color: var(--opus-text-secondary); margin-bottom: 4px;">Last Backup</div>
              <div id="last-backup" style="font-size: 0.95rem; font-weight: 600; color: var(--opus-primary);">Never</div>
            </div>
          </div>
        </section>
</main>

      <footer class="planner-footer">
        Keep your data safe with regular backups.
      </footer>
    </div>
  </div>

  <script src="{% static 'js/calendar/bulk-import-tasks.js' %}?v=20260108"></script>
  <script src="{% static 'js/misc/data-management.js' %}?v=20260108"></script>
  <script src="{% static 'js/calendar/calendar-embed.js' %}?v=20260108"></script>
</body>
</html>
